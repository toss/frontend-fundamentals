# 번들링, 꼭 필요할까요?

번들링은 단순히 여러 파일을 하나로 합치는 작업이 아니에요.
애플리케이션을 구성하는 모듈들이 어떤 방식으로 연결되어 있는지를 분석하고, 실행 가능한 코드로 재구성하는 구조적인 작업이에요.

작은 프로젝트에서는 모듈 간 흐름이 단순해서 전체 구조를 쉽게 파악할 수 있어요.
하지만 규모가 커지면, 같은 모듈이 중복으로 참조되거나, 순환 참조처럼 실행 흐름을 흐트러뜨리는 문제가 생기기 시작해요.
어떤 코드가 실제로 실행되는지 예측하는 것도 점점 어려워져요.

이런 복잡함을 해결하기 위해, 번들러는 내부적으로 **의존성 그래프**를 만들어요.
모든 모듈 간의 연결 관계를 그래프 형태로 정리해, 실행 순서를 명확히 구성하고, 꼭 필요한 코드만을 선택할 수 있게 돼요.

![](/images/bundling/dependency-graph.png)

## 어떤 과정을 거쳐 번들링이 될까요?

번들링의 핵심은 프로젝트에 필요한 코드를 정확히 식별하고 구조화하는 작업이에요.
이를 위해 번들러는 진입점에서 시작해 import나 require로 연결된 모듈을 따라가며 전체 코드를 탐색해요.
이 과정을 통해 번들러는 전체 모듈 간의 참조 구조를 파악하고, 해당 객체 정보를 이용하여 번들 파일을 생성해요.

예를 들어 다음과 같은 코드가 있다고 가정해볼게요:
```javascript
// index.js (entry file)
import { add } from './math.js';
console.log(add(2, 3));

// math.js
export function add(a, b) {
  return a + b;
}
```

index.js는 math.js를 참조하고 있어요. 
번들러는 index.js를 읽고 그 안의 import 구문을 분석해, 연결된 파일들을 하나씩 탐색해요.
이렇게 파악한 의존성은 다음과 같이 정리할 수 있어요:
```javascript
{
  "index.js": {
    "dependencies": ["math.js"],
    "code": "console.log(add(2, 3));"
  },
  "math.js": {
    "dependencies": [],
    "code": "function add(a, b) { return a + b; }"
  }
}
```

이 정보를 바탕으로 번들러는 브라우저에서 실행 가능한 번들 파일을 만들 수 있어요.
```javascript
(function(modules) {
  function require(file) {
    const exports = {};
    modules[file](exports, require);
    return exports;
  }

  require('index.js');
})({
  'index.js': function(exports, require) {
    const { add } = require('math.js');
    console.log(add(2, 3));
  },
  'math.js': function(exports) {
    exports.add = function(a, b) {
      return a + b;
    };
  }
});
```

## 어떤 문제를 해결하나요?
번들링은 코드 실행의 안정성과 효율성을 확보하는 데 중요한 역할을 해요.
중복 코드, 참조 오류, 불필요한 모듈 등 복잡한 프로젝트에서 자주 발생하는 문제를 구조적으로 해결할 수 있어요.

- ❌ 중복 제거
  - 동일한 함수나 라이브러리가 여러 번 포함되지 않도록 정리해요. 번들 크기를 줄이고, 브라우저의 네트워크 요청을 최소화할 수 있어요.

- 🔄 순환 참조 방지
  - 복잡하게 얽힌 참조 구조 속에서도 실행 오류 없이 올바른 순서를 보장해요. 예상치 못한 런타임 오류를 줄여줘요.

- 🗑 죽은 코드 제거
  - 실제로 사용되지 않는 모듈은 번들에서 제외해요. 최종 코드의 크기를 줄이고, 유지보수를 쉽게 만들어요.


## 다음 단계
번들링은 “어디서부터 어떤 파일을 읽어야 할지”를 명확히 정하는 것에서 시작돼요.
이 출발점을 **진입점(Entry Point)**이라고 부르고, 번들러는 진입점을 기준으로 전체 모듈 구조를 따라가며 코드를 모아갑니다.

다음 문서에서는 이 진입점이 어떤 역할을 하고, 생성되는 번들 파일의 구성에 어떤 영향을 주는지 자세히 살펴볼게요.